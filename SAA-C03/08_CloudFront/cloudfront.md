# CloudFront
- 콘텐츠 전송 네트워크 (CDN)
- 콘텐츠를 엣지에 캐시하여 읽기 성능을 향상시킵니다.
- 사용자 경험을 향상시킵니다.
- 전 세계적인 DDoS 보호 (전 세계적으로 보호), Shield와 AWS 웹 응용 프로그램 방화벽과 통합되어 있습니다.
- 원본 제공 방식
  - S3 버킷
    - 파일을 배포하고 엣지에 캐싱하는 데 사용됩니다.
    - CloudFront Origin Access Control (OAC)을 통해 향상된 보안 기능을 제공합니다.
    - OAC는 Origin Access Identity (OAI)를 대체하고 있습니다.
    - CloudFront는 인그레스로 사용될 수 있습니다 (S3로 파일 업로드).
  - 사용자 정의 오리진 (HTTP)
    - 응용 프로그램 로드 밸런서
    - EC2 인스턴스
    - S3 웹 사이트 (버킷을 정적 S3 웹 사이트로 먼저 활성화해야 함)
    - 원하는 모든 HTTP 백엔드
- CloudFront vs S3 Cross Region Replication
  - CloudFront
    - 글로벌 엣지 네트워크
    - 파일은 TTL(일반적으로 하루) 동안 캐시됩니다.
    - 모든 곳에서 이용 가능해야 하는 정적 콘텐츠에 적합합니다.
  - S3 Cross Region Replication
    - 각 리전마다 설정해야 하는 복제가 필요합니다.
    - 파일은 거의 실시간으로 업데이트됩니다.
    - 읽기 전용
    - 소수의 리전에서 저지연으로 사용 가능해야 하는 동적 콘텐츠에 적합합니다.
- CloudFront 지리 제한
  - 분배에 접근할 수 있는 사용자를 제한할 수 있습니다.
    - 허용 목록: 승인된 국가 목록 중 하나에 있는 경우에만 사용자가 콘텐츠에 액세스할 수 있도록 허용합니다.
    - 차단 목록: 금지된 국가 목록 중 하나에 있는 경우 사용자가 콘텐츠에 액세스하지 못하도록 차단합니다.
  - "국가"는 제3자 Geo-IP 데이터베이스를 사용하여 결정됩니다.
  - 사용 사례: 저작권 법을 준수하기 위해 콘텐츠 액세스를 제어합니다.
- 가격
  - CloudFront 엣지 위치는 전 세계적으로 분포되어 있습니다.
  - 엣지 위치별 데이터 전송 비용은 다릅니다.
- 가격 등급
  - 비용 절감을 위해 엣지 위치 수를 줄일 수 있습니다.
  - 세 가지 가격 등급이 있습니다
    - 가격 등급 All: 모든 지역 - 최상의 성능
    - 가격 등급 200: 대부분의 지역을 포함하지만 가장 비싼 지역은 제외됩니다.
    - 가격 등급 100: 가장 저렴한 지역만 포함됩니다.
- 캐시 무효화
  - 백엔드 오리진을 업데이트하는 경우, CloudFront는 이를 알지 못하며 TTL이 만료된 후에만 새로 고친 콘텐츠를 가져옵니다.
  - 그러나 CloudFront 무효화를 수행함으로써 전체 또는 일부 캐시를 강제로 새로 고칠 수 있습니다 (TTL을 우회).
  - 모든 파일 () 또는 특정 경로 (/images/)를 무효화할 수 있습니다.
- 전 세계 사용자를 위한 애플리케이션
  - 애플리케이션을 배포하고 전 세계 사용자가 직접 액세스하려고 합니다.
  - 사용자들은 다수의 홉으로 인해 지연이 발생할 수 있는 공용 인터넷을 통해 이동합니다.
  - 지연 시간을 최소화하기 위해 AWS 네트워크를 통해 가능한 빠르게 이동하려고 합니다.
  - Unicast IP와 Anycast IP의 차이점
    - Unicast IP: 하나의 서버가 하나의 IP 주소를 보유
    - Anycast IP: 모든 서버가 동일한 IP 주소를 보유하고 클라이언트는 가장 가까운 서버로 라우팅됩니다.

# AWS Global Accelerator
- AWS 내부 네트워크를 활용하여 애플리케이션으로 라우팅합니다.
- 애플리케이션을 위해 2개의 Anycast IP가 생성됩니다.
- Anycast IP는 트래픽을 직접 Edge Location으로 전송합니다.
- Edge Location은 트래픽을 애플리케이션으로 전송합니다.
- 특징
  - Elastic IP, EC2 인스턴스, ALB, NLB, 공개 또는 비공개와 함께 작동합니다.
  - 일관된 성능
    - 가장 낮은 지연 시간 및 빠른 지역 장애 조치를 위한 지능적인 라우팅
    - 클라이언트 캐시에 문제가 없습니다 (IP가 변경되지 않기 때문)
    - 내부 AWS 네트워크
  - 헬스 체크
    - Global Accelerator는 애플리케이션의 헬스 체크를 수행합니다.
    - 애플리케이션을 글로벌하게 만들어줍니다 (불건전한 상태의 경우 1분 미만의 장애 조치).
    - 재해 복구에 좋습니다 (헬스 체크를 통해).
  - 보안
    - 화이트리스트에 등록해야 하는 외부 IP는 단 2개입니다.
    - AWS Shield를 통한 DDoS 보호 기능이 제공됩니다.
- AWS Global Accelerator vs CloudFront
  - AWS Global Accelerator와 CloudFront는 모두 AWS의 글로벌 네트워크와 전 세계의 엣지 위치를 사용합니다.
  - 또한 두 서비스 모두 DDoS 보호를 위해 AWS Shield와 통합됩니다.
  - CloudFront
    - 캐시 가능한 콘텐츠 (예: 이미지 및 비디오)와 같은 콘텐츠의 성능을 개선합니다.
    - 동적 콘텐츠 (예: API 가속 및 동적 사이트 전달)의 성능을 개선합니다.
    - 콘텐츠는 엣지에서 제공됩니다.
  - Global Accelerator
    - TCP 또는 UDP를 통해 다양한 애플리케이션의 성능을 개선합니다.
    - 엣지에서 애플리케이션으로 패킷을 프록시하여 하나 이상의 AWS 리전에서 실행되는 애플리케이션에 전달합니다.
    - 게이밍 (UDP), IoT (MQTT) 또는 Voice over IP와 같은 비-HTTP 사용 사례에 적합합니다.
    - 정적 IP 주소가 필요한 HTTP 사용 사례에 적합합니다.
    - 결정적이고 빠른 지역 장애 조치가 필요한 HTTP 사용 사례에 적합합니다.
