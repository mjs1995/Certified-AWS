# Stateless Web App: WhatIsTheTime.com
- 공용 IP vs 개인 IP 및 EC2 인스턴스: 공용 IP는 인터넷에 직접 노출되는 IP 주소이며, 개인 IP는 사설 네트워크 내에서 사용되는 IP 주소입니다. EC2 인스턴스는 Amazon Elastic Compute Cloud의 가상 서버이며, 공용 IP 또는 개인 IP를 할당받을 수 있습니다.
- Elastic IP vs Route 53 vs 로드 밸런서: Elastic IP는 AWS에서 제공하는 고정된 IP 주소로, EC2 인스턴스에 연결되어 변경되지 않습니다. Route 53은 DNS 서비스로, 도메인 이름을 IP 주소로 매핑하여 웹 애플리케이션의 로드 밸런싱과 가용성을 관리합니다. 로드 밸런서는 인바운드 트래픽을 여러 EC2 인스턴스로 분산시켜줍니다.
- Route 53 TTL, A 레코드 및 Alias 레코드: TTL(Time-to-Live)은 DNS 레코드가 캐시될 수 있는 시간을 의미합니다. A 레코드는 도메인 이름을 IPv4 주소로 매핑하는 레코드입니다. Alias 레코드는 AWS 리소스(예: 로드 밸런서, S3 버킷)를 가리키는 특수한 유형의 레코드입니다.
- 수동으로 EC2 인스턴스 유지 vs Auto Scaling 그룹: EC2 인스턴스를 수동으로 관리하면 인스턴스를 시작하고 종료하는 작업을 직접 수행해야 합니다. Auto Scaling 그룹을 사용하면 애플리케이션의 수요에 따라 자동으로 EC2 인스턴스를 조정할 수 있습니다.
- 재해 대비를 위한 멀티 AZ: 멀티 AZ(Availability Zone)는 여러 물리적인 위치에 분산된 데이터 센터를 의미합니다. 재해 시 하나의 AZ가 영향을 받더라도 다른 AZ에서 애플리케이션이 계속 가동될 수 있어 가용성을 보장합니다.
- ELB 상태 확인: ELB(로드 밸런서)는 정상적으로 작동하는 EC2 인스턴스만에 트래픽을 분산시키기 위해 정기적인 상태 확인을 수행합니다. 상태 확인은 EC2 인스턴스의 건강 상태를 확인하고 필요한 경우 인스턴스를 제외시키는 역할을 합니다.
- 보안 그룹 규칙: 보안 그룹은 인스턴스에 대한 인바운드 및 아웃바운드 트래픽을 제어하는 가상 방화벽 역할을 합니다. 보안 그룹 규칙은 특정 포트, 프로토콜 및 IP 주소 범위를 허용하거나 거부하는 역할을 합니다.
- 비용 절감을 위한 용량 예약: 용량 예약은 특정 기간 동안 EC2 인스턴스 용량을 예약하는 기능으로, 비용을 절감할 수 있습니다.
- 웰 아키텍처 애플리케이션의 5가지 원칙: 비용, 성능, 신뢰성, 보안, 운영 우수성은 웰 아키텍처 애플리케이션의 5가지 주요 원칙입니다. 이러한 원칙을 고려하여 애플리케이션을 설계하고 구축하면 효율적이고 안정적인 시스템을 구현할 수 있습니다.


# Stateful Web App: MyClothes.com
- ![image](https://github.com/mjs1995/muse-data-engineer/assets/47103479/1058e1f3-2937-48bf-89d8-b2b1e53f391f)
- ![image](https://github.com/mjs1995/muse-data-engineer/assets/47103479/123b4e1a-f5a3-47fc-937e-3675e833e7a5)
- 웹 애플리케이션을 위한 3계층 아키텍처
- ELB(로드 밸런서)의 스티키 세션
- 웹 클라이언트를 사용하여 쿠키 저장 및 웹 앱을 상태 없게 만드는 방법
- ElastiCache를 사용한 데이터 캐싱
  - 세션 저장을 위한 ElastiCache (대안으로 DynamoDB 사용 가능)
  - RDS로부터 데이터 캐싱
  - 멀티 AZ(Availability Zone)
- RDS를 사용한 사용자 데이터 저장
  - 읽기 확장을 위한 읽기 전용 복제본
  - 재해 대비를 위한 멀티 AZ
- 보안 그룹 간 상호 참조를 통한 강력한 보안 설정

# Stateful Web App: MyWordPress.com
- ![image](https://github.com/mjs1995/muse-data-engineer/assets/47103479/109f4eba-b248-4a80-b497-acef9f06ba80)
- Aurora 데이터베이스를 사용하여 쉬운 멀티 AZ 및 읽기 전용 복제본 구성
- EBS를 사용하여 데이터 저장 (단일 인스턴스 애플리케이션)
- EFS를 사용하여 데이터 저장 (분산 애플리케이션)
- 애플리케이션을 빠르게 인스턴스화하는 방법
  - 전체 스택 (EC2, EBS, RDS)을 시작할 때 다음 작업에 시간이 소요될 수 있습니다
    - 애플리케이션 설치
    - 초기 데이터 (또는 복구 데이터) 삽입
    - 모든 구성 설정
    - 애플리케이션 시작
  - 클라우드의 장점을 활용하여 속도를 높일 수 있습니다.

# Elastic Beanstalk
- Elastic Beanstalk은 AWS에서 애플리케이션을 배포하는 개발자 중심의 관점입니다.
- 이전에 살펴본 모든 구성 요소(EC2, ASG, ELB, RDS 등)를 사용합니다.
- 관리형 서비스입니다.
  - 용량 프로비저닝, 로드 밸런싱, 스케일링, 애플리케이션 상태 모니터링, 인스턴스 구성 등을 자동으로 처리합니다.
  - 개발자는 애플리케이션 코드에만 책임을 집니다.
- 구성에 대한 완전한 제어권을 유지합니다.
- Beanstalk은 무료이지만 하위 인스턴스에 대해서는 비용이 발생합니다.
- 구성 요소
  - 애플리케이션: Elastic Beanstalk 구성 요소의 집합 (환경, 버전, 구성 등)
  - 애플리케이션 버전: 애플리케이션 코드의 반복(iteration)
  - 환경
    - 애플리케이션 버전을 실행하는 AWS 리소스의 집합 (한 번에 하나의 애플리케이션 버전만)
    - 티어: 웹 서버 환경 티어 및 워커 환경 티어
    - 여러 환경을 생성할 수 있습니다 (dev, test, prod 등)
- Web Server Tier vs. Worker Tier
  - ![image](https://github.com/mjs1995/muse-data-engineer/assets/47103479/895ef981-bf8b-42f4-beec-4e18bbbf4631)


# Extra Solution Architecture 
- S3 Event Notifications
  - S3:ObjectCreated, S3:ObjectRemoved, S3:ObjectRestore, S3:Replication 등
  - 객체 이름 필터링 가능 (*.jpg)
  - 사용 사례: S3에 업로드된 이미지의 썸네일 생성
  - 원하는 만큼 많은 "S3 이벤트"를 생성할 수 있습니다.
  - S3 이벤트 알림은 일반적으로 몇 초 내에 이벤트를 전달하지만 때로는 1분 이상 걸릴 수도 있습니다.
  - S3 Event Notifications with Amazon EventBridge  
    - JSON 규칙을 사용한 고급 필터링 옵션 (메타데이터, 객체 크기, 이름 등)
    - 다중 대상 - 예: Step Functions, Kinesis Streams / Firehose 등
    - EventBridge 기능 - 이벤트 아카이브, 이벤트 재생, 신뢰성 있는 전달
- 고성능 컴퓨팅(HPC)
  - 클라우드는 HPC를 수행하기에 이상적인 장소입니다.
  - 매우 높은 수의 리소스를 빠르게 생성할 수 있습니다.
  - 추가 리소스를 추가함으로써 결과 도출 시간을 단축할 수 있습니다.
  - 사용한 시스템에 대해서만 비용을 지불할 수 있습니다.
  - 유전체학, 계산화학, 금융 리스크 모델링, 날씨 예측, 기계 학습, 딥 러닝, 자율 주행 등을 수행할 수 있습니다.
  - 어떤 서비스가 HPC를 수행하는 데 도움이 될까요?
    - 데이터 관리 및 전송
      - AWS Direct Connect
        - 안전한 개인 네트워크를 통해 클라우드로 GB/s 단위의 데이터 이동
      - Snowball 및 Snowmobile
        - PB 단위의 데이터를 클라우드로 이동
      - AWS DataSync
        - 온프레미스와 S3, EFS, Windows용 FSx 간에 대량의 데이터 이동
    - 컴퓨팅 및 네트워킹
      - EC2 인스턴스
        - CPU 최적화, GPU 최적화
        - 비용 절감을 위한 스팟 인스턴스 / 스팟 플릿 + 자동 확장
      - EC2 배치 그룹: 우수한 네트워크 성능을 위한 클러스터
      - EC2 향상된 네트워킹 (SR-IOV)
        - 더 높은 대역폭, 더 높은 PPS (초당 패킷 수), 더 낮은 지연 시간
        - 옵션 1: Elastic Network Adapter (ENA) 최대 100 Gbps
        - 옵션 2: Intel 82599 VF 최대 10 Gbps – LEGACY
      - Elastic Fabric Adapter (EFA)
        - HPC용 향상된 ENA로, 리눅스에서만 작동
        - 노드 간 통신, 강하게 결합된 워크로드에 적합
        - 메시지 패싱 인터페이스 (MPI) 표준을 활용
        - 리눅스 운영 체제를 우회하여 낮은 지연 시간과 안정적인 전송 제공
    - 저장소
      - 인스턴스에 연결된 저장소
        - EBS: io2 Block Express를 사용하여 최대 256,000 IOPS로 확장 가능
        - 인스턴스 스토어: 수백만 개의 IOPS로 확장 가능, EC2 인스턴스와 연결되며 지연 시간이 낮음
      - 네트워크 저장소
        - Amazon S3: 대용량 블롭 저장소, 파일 시스템은 아님
        - Amazon EFS: 전체 크기에 따라 IOPS 확장 또는 프로비저닝된 IOPS 사용 가능
        - Amazon FSx for Lustre
          - HPC에 최적화된 분산 파일 시스템, 수백만 개의 IOPS
          - S3로 백업됨
    - 자동화와 오케스트레이션
      - AWS Batch
        - AWS Batch는 다중 노드 병렬 작업을 지원하여 여러 EC2 인스턴스에 걸친 단일 작업을 실행할 수 있습니다.
        - 쉽게 작업을 예약하고 EC2 인스턴스를 시작할 수 있습니다.
      - AWS ParallelCluster
        - AWS에서 HPC를 배포하기 위한 오픈 소스 클러스터 관리 도구입니다.
        - 텍스트 파일로 구성할 수 있습니다.
        - VPC, 서브넷, 클러스터 유형 및 인스턴스 유형의 자동 생성을 자동화할 수 있습니다.
        - 클러스터에서 EFA를 활성화할 수 있는 기능도 있습니다. (네트워크 성능 향상)
