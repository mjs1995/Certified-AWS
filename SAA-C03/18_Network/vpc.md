
# Virtual Private Cloud (VPC)
- CIDR(CIDR-IPv4)의 이해
  - CIDR(Classless Inter-Domain Routing)은 IP 주소를 할당하기 위한 방법입니다.
  - 보안 그룹 규칙 및 일반적인 AWS 네트워킹에서 사용됩니다.
  - IP 주소 범위를 정의하는 데 도움이 됩니다
  - CIDR은 두 가지 구성 요소로 구성됩니다.
    - 기본 IP(Base IP)
      - 범위에 포함된 IP를 나타냅니다 (XX.XX.XX.XX).
      - 예: 10.0.0.0, 192.168.0.0 등.
    - 서브넷 마스크(Subnet Mask)
      - IP에서 변경될 수 있는 비트 수를 정의합니다.
      - 예: /0, /24, /32.
      - 두 가지 형태로 표현할 수 있습니다
        - /8은 255.0.0.0으로 표현됩니다.
        - /16은 255.255.0.0으로 표현됩니다.
        - /24는 255.255.255.0으로 표현됩니다.
        - /32는 255.255.255.255로 표현됩니다.
- 공용 IP vs 개인 IP (IPv4)
  - 인터넷 할당 번호 관리 기관(IANA)은 특정 IPv4 주소 블록을 개인(LAN) 및 공용(인터넷) 주소 용도로 설정했습니다.
  - 개인 IP는 특정 값을 허용합니다
    - 10.0.0.0 - 10.255.255.255 (10.0.0.0/8) - 대규모 네트워크에서 사용됩니다.
    - 172.16.0.0 - 172.31.255.255 (172.16.0.0/12) - AWS 기본 VPC에서 사용됩니다.
    - 192.168.0.0 - 192.168.255.255 (192.168.0.0/16) - 예: 가정 네트워크에서 사용됩니다.
  - 인터넷의 나머지 모든 IP 주소는 공용입니다.
- AWS의 VPC - IPv4
  - VPC = 가상 사설망 (Virtual Private Cloud)
  - 한 AWS 리전에 여러 개의 VPC를 생성할 수 있습니다 (최대 5개 - 소프트 한계)
  - VPC 당 최대 CIDR 개수는 5개이며, 각 CIDR에 대해
    - 최소 크기는 /28 (16개의 IP 주소)
    - 최대 크기는 /16 (65536개의 IP 주소)
  - VPC는 사설이므로, 개인 IPv4 범위만 허용됩니다
    - 10.0.0.0 - 10.255.255.255 (10.0.0.0/8)
    - 172.16.0.0 - 172.31.255.255 (172.16.0.0/12)
    - 192.168.0.0 - 192.168.255.255 (192.168.0.0/16)
  - VPC의 CIDR은 다른 네트워크 (예: 기업 네트워크)와 겹치지 않아야 합니다.
- VPC - 서브넷 (IPv4)
  - AWS는 각 서브넷에서 5개의 IP 주소 (첫 4개와 마지막 1개)를 예약합니다.
  - 이 5개의 IP 주소는 사용할 수 없으며 EC2 인스턴스에 할당할 수 없습니다.
  - 예시: CIDR 블록이 10.0.0.0/24이면 예약된 IP 주소는 다음과 같습니다
    - 10.0.0.0 - 네트워크 주소
    - 10.0.0.1 - VPC 라우터용으로 AWS가 예약
    - 10.0.0.2 - Amazon 제공 DNS에 대한 매핑을 위해 AWS가 예약
    - 10.0.0.3 - 향후 사용을 위해 AWS가 예약
    - 10.0.0.255 - 네트워크 브로드캐스트 주소. AWS는 VPC에서 브로드캐스트를 지원하지 않으므로 이 주소는 예약됨
  - 시험 팁: EC2 인스턴스에 29개의 IP 주소가 필요한 경우
    - /27 크기의 서브넷을 선택할 수 없습니다 (32개의 IP 주소, 32 - 5 = 27 < 29)
    - /26 크기의 서브넷을 선택해야 합니다 (64개의 IP 주소, 64 - 5 = 59 > 29)